<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.1  (Linux)">
	<META NAME="AUTHOR" CONTENT="Dave Mills">
	<META NAME="CREATED" CONTENT="20020113;16343400">
	<META NAME="CHANGED" CONTENT="20060529;11361200">
	<STYLE>
	<!--
		@page { size: 8.5in 10.96in; margin-left: 1.25in; margin-right: 1.25in; margin-top: 1in; margin-bottom: 1in }
		P { margin-bottom: 0.08in }
		H1.western { font-family: "Bitstream Vera Serif", serif }
		H1.cjk { font-family: "Bitstream Vera Sans" }
		H1.ctl { font-family: "Tahoma", "Lucidasans", "Lucida Sans", "Arial Unicode MS" }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in"><FONT SIZE=5 STYLE="font-size: 20pt">Apogee
camera driver – OS X User Guide V1.6</FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">			Dave Mills (<A HREF="mailto:rfactory@theriver.com">rfactory@theriver.com</A>)
- June 2006</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Contents</FONT></P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Introduction</FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Installation</FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Graphical
	User Interface</FONT></P>
	<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">The
	Main window</FONT></P>
	<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">First
	time setup</FONT></P>
	<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Normal
	usage</FONT></P>
	<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Region
	mode</FONT></P>
	<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Focus
	frame acquisition</FONT></P>
</OL>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">   <FONT SIZE=4 STYLE="font-size: 16pt">Properties
window</FONT></P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">4.
Advanced use</FONT></P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">    <FONT SIZE=4 STYLE="font-size: 16pt">Remote
control </FONT>
</P>
<OL START=5>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">External
	packages</FONT></P>
</OL>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Appendix
1 - Processing CCD images</FONT></P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<H1 CLASS="western" ALIGN=JUSTIFY><IMG SRC="../../../p2/apogee-cd-osx/pics/logo.jpg" NAME="Graphic14" ALIGN=MIDDLE WIDTH=64 HEIGHT=129 BORDER=0>
<FONT SIZE=4 STYLE="font-size: 16pt">Apogee ALTA drivers for Mac OS X
<IMG SRC="../../../p2/apogee-cd-osx/pics/logo.jpg" NAME="Graphic15" ALIGN=MIDDLE WIDTH=64 HEIGHT=129 BORDER=0></FONT></H1>
<H2>1. Introduction</H2>
<P>This distribution contains the drivers and associated packages for
Apogee Instruments series of Scientific CCD cameras. 
</P>
<P>Both ALTA-E (Ethernet interface) and ALTA-U (USB interface) models
are supported. 
</P>
<P><B>ALTA-E is supported on any OS X release 10.1 or greater. </B>
</P>
<P><B>ALTA-U is supported on any OS X release 10.2.8 or greater. </B>
</P>
<P><BR><BR>
</P>
<HR>
<P><BR><BR>
</P>
<P><BR><BR>
</P>
<P><BR><BR>
</P>
<H2>1.1 CD Contents</H2>
<P>The following packages are included in this distribution : 
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in">apogee-driver-1.6.pkg - The driver
	and GUI interfaces 
	</P>
	<LI><P STYLE="margin-bottom: 0in">celestia-osx-1.3.1-1.dmg - A fully
	featured star-chart package 
	</P>
	<LI><P STYLE="margin-bottom: 0in">external-packages.tar - The
	sources for component packages (for developers) 
	</P>
	<LI><P STYLE="margin-bottom: 0in">Java1.4.1.dmg.bin - Java JRE for
	use with starjava 
	</P>
	<LI><P STYLE="margin-bottom: 0in">Java3D_and_JAI.dmg - Java imaging
	extension for use with starjava 
	</P>
	<LI><P STYLE="margin-bottom: 0in">starjava.jar - Starlink astronomy
	packages 
	</P>
	<LI><P STYLE="margin-bottom: 0in">TclTkAquaBI-8.4.7.0jaguar.dmg -
	Tcl/Tk for jaguar (10.2.x) 
	</P>
	<LI><P STYLE="margin-bottom: 0in">TclTkAquaBI-8.4.7.0panther.dmg -
	Tcl/Tk for panther (10.3.x) 
	</P>
	<LI><P STYLE="margin-bottom: 0in">TclTkAquaBI-8.4.9.1.dmg - Tcl/Tk
	(latest version for Tiger, untested) 
	</P>
	<LI><P>X11UserForMacOSX.dmg.bin - X-windows runtime distribution 
	</P>
</UL>
<HR>
<P><BR><BR>
</P>
<H2>2. Installation</H2>
<H3>X-windows runtime</H3>
<P>The image display component used is the SAOIMAGE DS9 program. This
program requires an X-windows environment. Your OS X distribution
cd's should contain a version , but we include a copy here for your
convenience, just in case you did not select it during your OS
installation. 
</P>
<P><EM>Install the X-windows package first</EM> 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-x1.gif" NAME="Graphic16" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>Choose a convenient location to unpack the archive 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-x2.gif" NAME="Graphic17" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>Double-click on the X11 metapackage icon 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-x3.gif" NAME="Graphic18" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-x4.gif" NAME="Graphic19" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-x5.gif" NAME="Graphic20" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>Agree to the license and select a destination volume,
<BR>installation should then proceed. 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-x6.gif" NAME="Graphic21" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<HR>
<H3>Tcl/Tk</H3>
<P>The graphical user interface is built using the Tcl/Tk scripting
language. Your OS X distribution includes a limited version but we
recommend you install one of the more comprehensive versions included
on this cd. Select the appropriate version according to your version
of OS X. 
</P>
<P><EM>Install the TclTkBI package second</EM> 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-tcl1.gif" NAME="Graphic22" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-tcl2.gif" NAME="Graphic23" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-tcl3.gif" NAME="Graphic24" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-tcl4.gif" NAME="Graphic25" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-tcl5.gif" NAME="Graphic26" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-tcl6.gif" NAME="Graphic27" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>Installation requires root priviledges, so enter the admin
password for your system. 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-tcl7.gif" NAME="Graphic28" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-tcl8.gif" NAME="Graphic29" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-tcl9.gif" NAME="Graphic30" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<HR>
<H3>apogee-driver</H3>
<P>This package contains the drivers and GUI's. 
</P>
<P><EM>Install the drivers package third</EM> 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-alta1.gif" NAME="Graphic31" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>Agree to the license 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-alta2.gif" NAME="Graphic32" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>Select an installation volume. It is recommended that<BR>you
accept the default location of /opt on the root Volume.<BR>If you
choose another location then you must issue the following<BR>command
in a terminal session after installation completes. 
</P>
<PRE STYLE="margin-bottom: 0.2in">        sudo ln -s /where-ever-you-installed /opt</PRE><P>
<IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-alta3.gif" NAME="Graphic33" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-alta4.gif" NAME="Graphic34" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>Installation requires root priviledges, so enter the admin
password for your system. 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-alta5.gif" NAME="Graphic35" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-alta6.gif" NAME="Graphic36" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-alta7.gif" NAME="Graphic37" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<HR>
<H2>Configuration</H2>
<P>Once all the requisite packages have been installed, the following
steps are required to configure the drivers : 
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in">Start the X-windows program, this
	should result in one or more &quot;Xterm&quot; windows. 
	</P>
	<LI><P STYLE="margin-bottom: 0in">Select an xterm window and type
	/opt/apogee/runmefirst 
	</P>
	<LI><P STYLE="margin-bottom: 0in">Select the correct Apogee camera
	type from the dialog 
	</P>
	<LI><P STYLE="margin-bottom: 0in">For an ALTA-E model , the system
	will now search for your camera (see ALTA-E section below). 
	</P>
	<LI><P>A &quot;startapogee&quot; script will be created in your home
	directory. 
	</P>
</UL>
<P>The X-windows icon will most likely appear either on the
Desktop<BR>or in the Applications folder, double-click to start 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-config1.gif" NAME="Graphic38" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>Depending upon whether you are using the Apple provided X11
release<BR>or the X-Darwin version, you may or may not see the next
screen. 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-config2.gif" NAME="Graphic39" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>Once X is running you should see at least 1 Xterm window. <BR>In
that window type the /opt/apogee/runmefirst command.<BR>In the dialog
that appears, select the appropriate config file<BR>for your camera
type (alta_net.ini or alta_usb.ini), click &quot;Open&quot;. 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-config3.gif" NAME="Graphic40" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>For ALTA-E models the system will now start searching for <BR>your
camera, so make sure it is powered on , and connected to <BR>your
ethernet switch. 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-config4.gif" NAME="Graphic41" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>For ALTA-U models you can check that the Mac OS can detect
your<BR>camera using the &quot;System Profiler&quot; tool. 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-config5.gif" NAME="Graphic42" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<HR>
<H2>Standard Usage</H2>
<P>The normal procedure for using the ALTA package is to start the
X-windows environment, and then type 
</P>
<PRE STYLE="margin-bottom: 0.2in">        ./startapogee</PRE><P>
into an xterm window. This will start the GUI, and the default image
viewer (DS9). 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-usage1.gif" NAME="Graphic43" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>Select &quot;Dark&quot; frames from the menu, and check the
&quot;Overwrite files&quot;<BR>checkbox. Change the exposure time to
10 (seconds).<BR>Now click &quot;Observe&quot;. 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-usage2.gif" NAME="Graphic44" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>A small countdown window will appear (it may be hidden by<BR>the
main GUI window)</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-usage3.gif" NAME="Graphic45" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>Once the readout completes, the image is automatically<BR>displayed
in the DS9 viewer. Use the &quot;Scale&quot; button in DS9<BR>and
then select &quot;hist equ&quot; to do a histogram equalization.<BR>Full
documentation for DS9 is available in the /opt/apogee/html<BR>directory,
or online. 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-usage7.gif" NAME="Graphic46" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>This snapshot shows the screen in the middle of a long (100
frames)<BR>calibration run. 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-usage8.gif" NAME="Graphic47" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>The &quot;Edit&quot; menu provide access to the &quot;Properties&quot;
window.<BR>This window provides lower level control/feedback of the
camera. 
</P>
<P>The &quot;Temperature&quot; panel of the Edit-Properties menu
item<BR>lets you control the setpoint, and see the Temperature
history graph. 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-usage4.gif" NAME="Graphic48" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>The &quot;Geometry&quot; panel of the Edit-Properties menu
item<BR>lets you control the frame size and binning properties.<BR>It
is usually more convenient to use the Observe menu<BR>to
interactively select ROI's. 
</P>
<P><IMG SRC="../../../p2/apogee-cd-osx/pics/snapshot-usage5.gif" NAME="Graphic49" ALIGN=BOTTOM WIDTH=771 HEIGHT=600 BORDER=0>
</P>
<P>Advanced users may wish to explore the capabilities of
the<BR>StarJava image processing and data reduction toolset which<BR>may
be installed from the cd (double-click the starjava.jar icon<BR>on
the installation cd). 
</P>
<P>The User Guide and Programming manual provide more
detailed<BR>explanations of all the aspects of the user interface,
and the<BR>embedded scripting commands available (some tcl/tk
expertise<BR>is advisable). 
</P>
<HR>
<H2>ALTA-E</H2>
<P>The ALTA-E series cameras operate over standard ethernet<BR>and
may require you to temporarily alter the IP address of<BR>your PC
during configuration (if you have no DHCP server). 
</P>
<P>Log in with the username you will use to operate the camera, and
type 
</P>
<PRE> 
        /opt/apogee/scripts/altaDiscover
 </PRE><P>
A small window will appear logging progress of the search. 
</P>
<P>The camera obtains its IP address from a DHCP server on your local
network. <BR>This means that every time the camera is powered on
it<BR>may obtain a different IP address. In this case you will have
to run</P>
<PRE> 
        /opt/apogee/scripts/altaDiscover
 </PRE><P>
again each time. 
</P>
<P>To avoid this you can configure the camera to have a static IP
address. 
</P>
<P>Run altaDiscover once to obtain the current address. Then start a
webrowser and navigate to 
</P>
<P><B>http://address-reported-by-altaDiscover</B> 
</P>
<P>The cameras onboard webserver shows a welcome page.<BR>Choose the
&quot;Configure Network properties&quot; option.<BR>Use a username of
&quot;admin&quot; and password of &quot;configure&quot;<BR>to access
the page. 
</P>
<P>Disable the DHCP option, and then enter the cameras<BR>IP address
in the appropriate box. <BR>Use the same network mask and gateway
settings that <BR>were reported on the welcome page. <BR>Then click
&quot;Commit&quot; to save the settings. 
</P>
<P>Once you have setup the camera with a static IP address,<BR>it is
also a good idea to enter this address into the<BR>hosts database on
your machine. 
</P>
<P>For example, if the IP address is 192.168.0.100, then add the
following line to /etc/hosts (as root) 
</P>
<PRE> 
192.168.0.100   alta    alta.localdomain
 </PRE>
<HR>
<H3><BR><BR>
</H3>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">3.
Graphical user interface. </FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The graphical user
interface is still under development. It provides easy acces to the
major functions such as image acquisition, temperature control, and
calibration image management. 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The program may be started from an
xterm by typing 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>~/startapogee</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The program will open a
small main window, and then create a message window which shows the
progress of the system startup operations. On a slow machine this
make take a minute, n a modern machine (eg 1Ghz cpu), the startup
only takes a couple of seconds and the messages will probably update
too quickly to be read.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Once the message window
closes, the system is ready for use. The camera is initialized, and
temperature control has been switched on.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4>3.1 The main window </FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><IMG SRC="user-guide-osx_html_m9de6b60.gif" NAME="Graphic1" ALIGN=LEFT WIDTH=576 HEIGHT=367 BORDER=0><BR CLEAR=LEFT><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4>3.1.1 First time setup</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The GUI is initially
configured for Tucson,AZ. To set the location,  click the &quot;?&quot;
button next to the location. A window will open, showing a list of
locations, use the mouse to scroll the list until you reach your
city, then double-click it. The latitude/longitude and name will be
inserted into the main window. 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">If your city is not
listed, simply delete &quot;Tucson&quot; and type the name in. There
are a number of WWW sites can be used to lookup your
longitude/latitude based on City or zip code.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">Select &quot;File-&gt;Save&quot; from
the pull-down menu to save the changes to disk.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4>3.1.2 Normal usage</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">1. Select the image
type (Object, Flat-field, Dark, etc)</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">2. Adjust the
exposure time as required</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">3. Adjust the
number of frames</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">4. Optionally
adjust the directory to be used to save images (defaults to the      
	startup directory)</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">5. Adjust the image
name. For sequences of images, the image number</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">   	can be
automatically inserted into the name at any position using a</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">   	marker (%d).
For example  test_%d</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">6. Click &quot;Observe&quot;
(a sequence of frames may be terminated by clicking &quot;Abort&quot;
	after the sequence has started).</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The exposure(s) will now
be taken and saved on disk in FITS format. If the &quot;automatic
display&quot; option is selected, then the image(s) will also be
automatically be displayed in the DS9 image viewer.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">By default the raw image
data is written to disk. The &quot;auto-calibrate&quot; option is
used to select automatic calibrations. When this option is enabled,
the best (ie nearest temperature match) calibration frames will
automatically be loaded and applied. Please refer to the
&quot;Calibrations&quot; chapter to  learn how to create libraries of
calibration data for this purpose.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">An option to perform
automatic bias subtraction is also provided.  Use the geometry
properties to adjust the frame dimension (BIC, SkipC, and NumY) to
provide a reasonable number of bias columns (6+), 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><IMG SRC="user-guide-osx_html_m54ad01aa.gif" NAME="Graphic3" ALIGN=LEFT WIDTH=523 HEIGHT=307 BORDER=0><BR CLEAR=LEFT><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">then enter the  column
numbers in the entry fields provided. Selecting &quot;Automatic bias
subtraction&quot; will then automatically average the data in the
bias columns and them from the image before writing it out. In this
case the bias columns will not be included in the written image.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">For the most flexible
post-processing, the images are written including IRAF compatible
header information. This allows the images to be easily processed
using the IRAF ccdred package (available as part of the &quot;Open
Source Astronomy&quot; cdrom distribution available from
http://www.randomfactory.com/).</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">In addition to the main
window, there are a number of auxillary windows to control less
frequently used facilities. These windows can be accessed via the 
pull-down menu's, or via hot-keys.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-left: 0.5in; margin-bottom: 0in"><B>Alt-p</B>
- will open/close the &quot;Properties&quot; window</P>
<P ALIGN=JUSTIFY STYLE="margin-left: 0.5in; margin-bottom: 0in"><B>Alt-c</B>
- will open/close the &quot;Calibrations&quot; window</P>
<P ALIGN=JUSTIFY STYLE="margin-left: 0.5in; margin-bottom: 0in"><B>Alt-d</B>
- will open/close the &quot;Drift-scan&quot; window</P>
<P ALIGN=JUSTIFY STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4>3.1.3 Region mode</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">To select a sub-region for readout</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">1. Ensure a
full-frame image is displayed in DS9</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">2. Select
&quot;Observe-&gt;Region&quot; from the pull-down menu</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">3. Reply to the
pop-up dialog (use current region or define a new one)</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">4. For new regions,
use the mouse to define the region in DS9 using a click-and-	drag
motion</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">5. Click the pop-up
OK when ready</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in">6. Click &quot;Observe&quot;</P>
<P STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Region mode may also be
accessed via the &quot;Observe-&gt;Continuous&quot; pull-down menu
entry. In this mode, the sub-region will be continuously exposed,
readout, and displayed, until &quot;Abort&quot; is used to stop the
sequence. This mode of operation should be useful for  manual
focusing. The subregions are not saved to disk when in continuous
exposure mode.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4>3.1.4 Focus frame
acquisition</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Focus frames consist of
multiple exposures, taken without reading out the image. Between each
exposure, the image is shifted slightly on the detector  (either by
reading out a few lines, or by offsetting the telescope slightly),
and the focus is also adjusted.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">We use the detector shift
method, as it also works on manual telescopes.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">After each exposure, a
pop-up dialog will appear. At this point, manually adjust the focus
by a (hopefully) small known amount, then click OK. After all the
exposures are completed, the frame is read out and written to disk.
Special keywords are inserted into the header to allow the IRAF
imfocus task to automatically determine &quot;best&quot; focus (this
feature is still under development).</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Support for electronic
focus position adjustment will be made available in future releases
of the package.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">For systems where no
electronic read-back of focus position is available it can be
simulated by attaching a calibrated disk to the focuser.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4>3.2 Properties window</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The properties window can
be accessed either by selecting &quot;Options-&gt;Properties&quot;
from the pull-down menu, or by typing <B>Alt-p</B> whilst the pointer
is in the main window. In each case repeating the operation will
close the window again.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The window consists of a set of tabbed
panels, click the tab name to view the panel. 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">Geometry</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><IMG SRC="user-guide-osx_html_m54ad01aa.gif" NAME="Graphic5" ALIGN=LEFT WIDTH=526 HEIGHT=352 BORDER=0><BR CLEAR=LEFT><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">This panel provides easy
editing of all the relevant parameters to competely  define the
readout region. Subregions can be defined by editing StartX, StartY, 
NumX and NumY. Binning can be set in each axis, and so on. Every
change is immediately tested, and any illegal combinations will cause
the background color of the panel to change. It will not be possible
to  obtain an image if an illegal combination is selected. 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">In general the only
parameters which will be manually adjusted are the binning factors.
Sub-region definition is more easily performed using the pull-down
&quot;Observe-&gt;Region&quot; menu selection in the main window.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">Temperature</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><IMG SRC="user-guide-osx_html_78f57a71.gif" NAME="Graphic6" ALIGN=LEFT WIDTH=531 HEIGHT=351 BORDER=0><BR CLEAR=LEFT><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">This panel provides
control and feedback. Select the required target temperature using
the arrows, or type in a new target temperature. 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The graph illustrates the
last minute or so of temperature readings from the  camera. It often
takes about 20 seconds after a new target temperature is requested
before the temperature changes significantly, so be patient.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4>DS9 Image display tool</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Images may be
automatically displayed in the DS9 image viewer. Select &quot;automatic
display&quot; in the main window to activate this option.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><IMG SRC="user-guide-osx_html_4add574e.gif" NAME="Graphic7" ALIGN=LEFT WIDTH=553 HEIGHT=650 BORDER=0><BR CLEAR=LEFT><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The DS9 image viewer is a
powerful tool. There is extensive online  documentation available at 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">	file:/opt/apogee/html/ds9/index.html</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Most aspects are fairly
intuitive, configuration is done using the  pull-down menus;
contrast/brightness is adjusted by holding down the 
left-mouse-button, and moving the mouse around. The middle mouse
button centers the image at the current location.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<OL START=4>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Advanced
	use.</FONT></P>
	<P STYLE="margin-bottom: 0in"></P>
</OL>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4>4.1 Remote control</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">There are three methods for using the
software via a remote computer.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P STYLE="margin-bottom: 0in"><B>Standard X-windows</B></P>
	<P STYLE="margin-bottom: 0in"></P>
	<P STYLE="margin-bottom: 0in">Use the standard X-windows display
	redirection facility to point</P>
</OL>
<P STYLE="margin-bottom: 0in">    the display to another computer
(named &quot;other&quot; for example).</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	eg. <B>setenv DISPLAY other:0</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">   The &quot;<B>xhost +ccd-name</B>&quot;
command must also be issued on the &quot;other&quot;</P>
<P STYLE="margin-bottom: 0in">   computer, to allow remote displays
to take place (where ccd-name is the</P>
<P STYLE="margin-bottom: 0in">   name of the camera control
computer).</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">   Finally , start the GUI as usual,
the windows should appear on the</P>
<P STYLE="margin-bottom: 0in">   &quot;other&quot; machine.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">   This method only works if both
computer are running a *nix type operating</P>
<P STYLE="margin-bottom: 0in">   system. X-windows is available for
MS Windows, but it is usually expensive.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><B>2. VNC</B></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Use the VNC (Virtual
network computing) software (which is free, and open-source).</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">This package supports the
remote viewing on the ccd GUI desktop on  *nix, windows, and Mac
platforms. Even better, multiple remote users can simultaneously view
the same dekstop, and even share interaction rights with the
applications. Given fast network connections (fast ethernet) this is
a near optimal solution. The VNC package is just one of the items in
the bundle of extras included in the cdrom version of the Apogee
Drivers cd, available from The Random Factory.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Future releases of the
driver will also include support for true client/server use of
cameras. In this situation, the GUI will actually run on the remote
machine, and only the low level camera access code will run on the
camera controller computer.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<OL START=3>
	<LI><P STYLE="margin-bottom: 0in"><B>Client/Server</B></P>
</OL>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">An experimental client/server mode of
operation is also available. 
</P>
<P STYLE="margin-bottom: 0in">The script
/opt/apogee/scripts/startserver will lauch a camera server process
which listens on port 2001 for connections. Commands can be sent from
any other computer by copying the script
/opt/apogee/scripts/apogeeclient to the remote machine and editing it
to reflect the location of the machine hosting the camera.  The
client machine must have tcl installed  (in /usr/bin/tclsh).</P>
<P STYLE="margin-bottom: 0in">The socket interface is very simple and
could easily be driven by user programs written in any standard
programming language.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">5.
External packages</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The Random Factory also
produces a very extensive collection of Astronomical software all
pre-compiled for Mac OS X. The current release  includes over 4GB of
software on a 4-cdrom set.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Appendix
1 - Processing CCD images</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">This advice is
paraphrased from the advice provided to professional Astronomers
observing at the US National Observatory. It is based on a document
included with the IRAF system, and was written by Dr. Phil Massey
(currently at Lowell Observatory).</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><B>What Calibration
Frames Do You Need?</B></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The answer to this
depends to some  extent on what it is that you are doing. The goal is
to not let the quality of the calibration  data degrade your
signal-to-noise in any way. If you are in the regime where the
read-noise of the chip is the dominant source of noise on your
program objects, then subtracting a single  &quot;bias frame&quot;
from your data would increase the noise prohibitively.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">However, if you instead
use the average of 25 bias frames, the noise will be increased by 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">only 10%. Of course, if
you are into high signal-to-noise spectroscopy, so you have lots and 
lots of signal compared to read-noise, or if you have high sky
background on direct images, so that read-noise is again immaterial,
then the signal-to-noise will be little affected by whether you have
only a few bias frames. However, in this regime the quality of your
flat fielding is all important if you want to get the most out of
your data.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"> 
</P>
<P STYLE="margin-bottom: 0in">The following list contains the type of
calibration images you may need, and provides some  guide to the
consideration of how many you may want to have.</P>
<P STYLE="margin-bottom: 0in"> 
</P>
<P STYLE="margin-bottom: 0in"><B>bias frames. </B>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">These are zero second
integration exposures obtained with the same pre-flash (if any) you
are using on your objects. If read-noise will sometimes dominate 
your source of error on the objects, take 25 bias frames per night.
Take them  over dinner and you'll never notice it. You will want to
have a new  sequence of these each day.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"> 
</P>
<P STYLE="margin-bottom: 0in"><B>dark frames. </B>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">These are long exposures
taken with the shutter closed. If your longest  exposure time is over
15 minutes you may want to take an equal length dark frame,  subtract
a bias frame from it, and decide if you are worried about how much 
dark current is left.  Applications where dark current will matter
are long-slit spectroscopy and surface brightness studies -- cases
where the background  is not removed locally. If you do find that you
need to take care of dark current,  then you should take at least 3
and preferably 5 to 10 dark frames during your run,  each with an
integration time equal to your longest exposure. You should  ensure
that your system is sufficiently light-tight to permit these to be
done during  the day.          
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"> 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><B>flat field exposures. </B>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">At a minimum, flat field
exposures are used to remove pixel-to-pixel  variations across the
chip. Usually dome flats (exposures of an illuminated white  board)
will suffice to remove the pixel-to-pixel stuff. You will want to
expose the  dome or projector flats so that you get sufficient counts
to not degrade the  signal-to-noise of the final images. If you are
after 1% photometry per pixel  then you will need to have several
times more than 10,000 electrons accumulated  in your flats, but you
need to be careful not to exceed the good linearity limit  in any
single flat exposure. Generally if you have 5 or more flats each with
10,000  electrons per pixel you are probably fine. You will need a
set like this for every  filter, and you probably will want to do a
new sequence every day.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"> 
</P>
<P STYLE="margin-bottom: 0in"><B>twilight flats. </B>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">If you are interested in
good photometry of objects across your field, you need to know if the
sky looks different  to your CCD than the dome flat. It is not
unusual to find 5-10% 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">gradients in the
illumination response between a  flat and a sky exposure, and this
difference will translate directly into a 5-10% error in your
photometry.  For most applications, exposures of bright twilight sky
(either for direct imaging  or spectroscopy) will cure this problem.
With direct imaging this requires you to be very quick on your feet
to obtain a good level of sky exposure in each of your filters while
the sky is getting darker and darker. (Only the truly desperate 
would take twilight flats in the morning!) For direct imaging I would
recommend  3 to 5 exposures in each filter, stepping the telescope
slightly in between the  exposures so that any faint stars can be
effectively cleaned out. You will find that you need to keep
increasing the exposure time to maintain an illumination level of
10,000 electrons.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"> 
</P>
<P STYLE="margin-bottom: 0in"><B>blank dark sky exposures. </B>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Some observers doing
sky-limited direct imaging may wish to                               
        try exposures of blank sky fields rather than twilight sky,
as the color of twilight  and the color the dark sky do differ
considerably. Obtain at least three, and preferably four, long
exposures through each filter of some region relatively free from
stars  , stepping the telescope 10-15 arcseconds  between each
exposure. The trick here, of course, is to get enough counts in the
sky exposures to make this worth your while. Unless you are willing
to devote a great deal of telescope time to this, you will have to
smooth these blank dark sky exposures to reduce noise, but the
assumption in such a smoothing process is that the color response of
the chip does not  vary over the area you are smoothing. You might
try dividing a U dome flat by a V dome  flat and seeing how
reasonable an assumption this might be. Also, if the cosmetics are
very bad the smoothing process will wreak havoc with your data if 
you are not successful in cleaning out bad columns and pixels.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"> 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><B>This section will briefly outline
what we will do with the calibration images.</B></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"> 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Most of the calibration
data is intended to remove &quot;additive&quot; effects: the
electronic  pedestal level (measured from the overscan region on each
of your frames), the pre-flash  level (measured from your bias
frames), and, if necessary, the dark current. The flat field 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">data (dome and twilight
sky exposures) will remove the multiplicative  gain and illumination
variations across the chip.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"> 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">When you obtained your
frames at the telescope, the output signal was &quot;biased&quot; by 
adding a pedestal level of several hundred ADU's. We need to
determine this bias level  for each frame individually, as it is not
stabilized, and will vary slightly  (ss 5-30 ADU's) with telescope
position, temperature, and who knows what else.  Furthermore, the
bias level is usually a slight function of position on the chip, 
varying primarily along columns. We can remove this bias level to
first-order by using  the data in the overscan region, the
(typically) 32 columns at the right edge of your frames.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"> 
</P>
<P STYLE="margin-bottom: 0in"><B>data    </B>                     
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">We will average the data
over all the columns in the overscan region, and fit these values as
a function of line-number (i.e., average in the &quot;x&quot;
direction within the  overscan region, and fit these as a function of
&quot;y&quot;). This fit will be subtracted  from each column in your
frame; this &quot;fit&quot; may be a simple constant. At this point 
we will chop off the overscan region, and keep only the part of the
image containing useful data. This latter step usually trims off not
only the  overscan region but the first and last few rows and columns
of your data.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"> 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">If you pre-flashed the
chip with light before each exposure, there will still be  a non-zero
amount of counts that have been superimposed on each image. This
extra  signal is also an additive amount, and needs to be subtracted
from your data. In  addition, there may be column-to-column variation
in the structure of the bias level,  and this would not have been
removed by the above procedure. To remove both the pre-flash  (if
any) and the residual variation in the bias level (if any) we will
make use of frames  that you have obtained with a zero integration
time. These are referred to in IRAF as  &quot;zero frames&quot; may
also be called &quot;bias frames&quot;. We need to average  many of
these (taken with pre-flash if you were using pre-flash on your
object frames),  process the average as described above, and subtract
this frame from all the other frames.             
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"> 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">&quot;Dark current&quot; is also
additive. On some CCD's there is a non-negligible amount of
background added during long exposures. If necessary, you can remove
the dark current  to first-order by taking &quot; dark&quot;
exposures (long integrations with the shutter closed), process- ing
these frames as above, and then scaling to the exposure  time of your
program frames. However, it's been my experience that the dark
current  seldom scales linearly, so you need to be careful.
Furthermore, you will need at  least 3 dark frames in order to remove
radiation events (&quot;cosmic rays&quot;), and unless  you have a
vast number of dark exposures to average you may decrease your
signal-to-noise;</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The bottom line of all
this is that unless you really need to remove the dark current, don't
bother.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"> 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The next step in removing
the instrumental signature is to flat-field your data.  This will
remove the pixel-to-pixel gain variations, and (in the case direct
imaging)  the larger-scale spatial variations. If you are  doing
direct imaging, then you  are probably happy by normalizing the
flat-field exposures to some average value.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The final step in the
flat-fielding process is to see if your twilight sky exposures have
been well flattened by this procedure--if not, we may  have to
correct for this.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"> 
</P>
<P STYLE="margin-bottom: 0in">                                       
                       
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=5 STYLE="font-size: 20pt">Apogee
camera driver - Programmers Guide V1.6</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in">			Dave
Mills(rfactory@theriver.com) - June 2006</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 1in; margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Contents</FONT></P>
<P STYLE="margin-left: 1in; margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">CapnCamera
	object (USB/NET)</FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Tcl
	Scripting interface</FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Code
	generation</FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Tcl/Tk
	and loadable libraries</FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Ccd
	library</FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">LX
	library</FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Remote
	control </FONT>
	</P>
	<P STYLE="margin-bottom: 0in"></P>
</OL>
<P STYLE="margin-left: 1in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 1in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 1in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">1.
CApnCamera object (USB/NET)</FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">In the unlikely event
that you should find it necessary to use the C++ interface directly, 
there is a small sample of code in the file 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">	<SPAN STYLE="font-weight: medium"><I>/opt/apogee/src/apogee/test_alta.cpp.</I></SPAN></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">This code should be
easily comprehensible to anyone familiar with C++. For example to
create a new camera object</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">	 <B>cam = new
CApnCamera;</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">To call a method, for example
InitDriver</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>result =
cam-&gt;InitDriver(cameraNumber,0,0);   - USB, NET </B>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">To set the value of an instance
variable</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>cam-&gt;m_CoolerSetPoint = -20.0;</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">2.
Tcl Scripting interface</FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The simplest way to
program using the driver is via the provided scripting interface
libraries. An interface is provided for the Tcl/Tk language. This
language is easy to learn due to its interpretive nature. That is,
you type commands directly to a command line, and they are executed
immediately.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Interfaces to other
languages (python, perl, and more) can also be automatically
generated using the SWIG package (included in the
&quot;external-packages.tar&quot; archive).</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">To begin a Tcl/Tk session, open an
X-terminal, start a csh shell and prepare the environment by typing 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>source
/opt/apogee/scripts/setup.env     </B>(prepares the environment)</P>
<P STYLE="margin-bottom: 0in">	</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">This will initialize your
shell to use the included version of &quot;wish&quot; , the Tcl/Tk
windowing shell. Another version of &quot;wish&quot; may already be
installed on the system, but it is recommended that the included
version be used to avoid and potential library version conflicts.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">	<B>/usr/bin/wish   </B> 
(starts the tcl/tk shell)</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">A small gray window will open.
Re-select your xterm window and  type 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>source
/opt/apogee/scripts/camera_init.tcl     </B><SPAN STYLE="font-weight: medium">(command
line only)</SPAN></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: medium">or</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><B>	source /opt/apogee/scripts/gui.tcl 
     </B><SPAN STYLE="font-weight: medium">(gui interface plus
command line)</SPAN></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The appropriate driver
library will be dynamically loaded, and new commands will be added to
the Tcl shell. Type a &quot;?&quot; at the prompt to get a list of
all the commands Tcl is currently aware of.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The camera_init script
also creates a <B>CAMERA</B> variable which acts as a software
pointer</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">to the C++ structure used
to control the camera.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Tcl commands typically
protect the user against incorrect usage. For example the CAMERA
object may be commanded using the syntax</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">	<B>$CAMERA  command
[arg1] [arg2] ...</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">Typing 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>$CAMERA xyzzy</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">will result in an error
report (because &quot;xyzzy&quot; is not a valid camera command!).
This error report helpfully includes a list of all the commands that
the $CAMERA referenced object does understand.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The most useful commands are listed
below.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><B>	$CAMERA InitDriver cameraNumber  0
0  </B>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">This command needs no
additional arguments, it performs camera initialization.  It will not
normally be necessary to use this call, as it will have been  done as
part of the camera_init.tcl script. 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><B>	$CAMERA read_Status</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">This command returns an
integer representing the readout status of the camera. Typically this
will be stored in a tcl variable, and then printed out in  user
friendly format.  E.g.</P>
<P STYLE="margin-bottom: 0in">(this example is for ISA/PCI/PPort
cameras, the ALTA status codes are slightly different)</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">        <B>set s [$CAMERA read_Status]</B></P>
<P STYLE="margin-bottom: 0in">        <B>switch $s {</B></P>
<P STYLE="margin-bottom: 0in">             <B>0  {set t &quot;Idle&quot;}</B></P>
<P STYLE="margin-bottom: 0in">             <B>1  {set t &quot;waiting
for trigger&quot;}</B></P>
<P STYLE="margin-bottom: 0in">             <B>2  {set t &quot;exposing&quot;}</B></P>
<P STYLE="margin-bottom: 0in">             <B>3  {set t
&quot;downloading&quot;}</B></P>
<P STYLE="margin-bottom: 0in">             <B>4  {set t &quot;line
ready&quot;}</B></P>
<P STYLE="margin-bottom: 0in">             <B>5  {set t &quot;image
ready&quot;}</B></P>
<P STYLE="margin-bottom: 0in">             <B>6  {set t &quot;flushing
BIR&quot;}</B></P>
<P STYLE="margin-bottom: 0in">             <B>default {set t &quot;ERROR
code $s&quot;}</B></P>
<P STYLE="margin-bottom: 0in">        <B>}</B></P>
<P STYLE="margin-bottom: 0in">        <B>puts stdout &quot;Camera
status is $s&quot;</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><B>	$CAMERA Expose duration shutter</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Take an exposure of the
requested duration (expressed in seconds). The value of the shutter
argument is either 0 - leave shutter closed, or 1 - open shutter
during exposure.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><B>	$CAMERA BufferImage testname</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">This command retrieves
the image from the camera, and saves it in the  PC's
memory/swap-space. Any number of images can be buffered in this way,
subject to  available memory.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Once the image is in
memory it can  be manipulated using the commands from the Ccd
library. For example</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>list_buffers</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">shows current buffers, their
dimensions, bit-depths etc.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>write_buffer testname mytest.fits</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">stores the contents of
the buffer &quot;testname&quot; on disk as a FITS format file. 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">In addition to the
&quot;methods&quot; associated with a CAMERA object, there is also a
mechanism for access to the &quot;instance&quot; variables of the
CAMERA object. Each instance variable corresponds to a camera
configuration parameter. The syntax for examining the current value
of a parameter is 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>$CAMERA configure
-m_[parameter-name]</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">and to set the parameter to a new value</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>$CAMERA configure
-m_[parameter-name] new-value</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The following instance variables are
supported</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	CameraId -		Camera number</P>
<P STYLE="margin-bottom: 0in">	CameraInterface -	0=NET, 1=USB</P>
<P STYLE="margin-bottom: 0in">	CameraModel -	Model code</P>
<P STYLE="margin-bottom: 0in">	ClampColumns -	Clamp columns</P>
<P STYLE="margin-bottom: 0in">	Color 	-		1 if color ccd</P>
<P STYLE="margin-bottom: 0in">	DataBits -		0=16 bits, 1=12 bits</P>
<P STYLE="margin-bottom: 0in"><SPAN LANG="en-US">	DefaultGainTwelveBit
–</SPAN> gain 0 to 1024</P>
<P STYLE="margin-bottom: 0in">	DefaultOffsetTwelveBit - offset</P>
<P STYLE="margin-bottom: 0in">	DefaultRVoltage -	Voltage</P>
<P STYLE="margin-bottom: 0in">	DigitizeOverscan -	1 = digitize
overscan region</P>
<P STYLE="margin-bottom: 0in">	HFlushDisable -	1 = Disable horizontal
flushing</P>
<P STYLE="margin-bottom: 0in">	ImagingColumns -	Number of imaging
columns</P>
<P STYLE="margin-bottom: 0in">	ImagingRows -	Number of imaging rows</P>
<P STYLE="margin-bottom: 0in">	InterlineCCD -	1 = interline ccd 
</P>
<P STYLE="margin-bottom: 0in">	MinSuggestedExpTime – minimum
recommended exposure</P>
<P STYLE="margin-bottom: 0in">	OverscanColumns - 	Number of overscan
columns</P>
<P STYLE="margin-bottom: 0in">	OverscanRows -	Number of overscan rows</P>
<P STYLE="margin-bottom: 0in">	PixelSizeX -		Pixel x size in microns</P>
<P STYLE="margin-bottom: 0in">	PixelSizeY -		Pixel y size in microns</P>
<P STYLE="margin-bottom: 0in">	PostRoiSkipColumns – Post ROI skip</P>
<P STYLE="margin-bottom: 0in">	PreRoiSkipColumns – Pre ROI skip</P>
<P STYLE="margin-bottom: 0in">	ReportedGainSixteenBit -</P>
<P STYLE="margin-bottom: 0in">	ResetVerticalArrays – 1 = Reset
vertical arrays</P>
<P STYLE="margin-bottom: 0in">	RoiBinningH -	Horizontal binning</P>
<P STYLE="margin-bottom: 0in">	RoiBinningV -	Vertical binning</P>
<P STYLE="margin-bottom: 0in">	RoiPixelsH -		Exposure column count</P>
<P STYLE="margin-bottom: 0in">	RoiPixelsV -		Exposure row count</P>
<P STYLE="margin-bottom: 0in">	RoiStartX -		First exposure column</P>
<P STYLE="margin-bottom: 0in">	RoiStartY -		First exposure row</P>
<P STYLE="margin-bottom: 0in">	ShutterCloseDelay -	shutter close
delay</P>
<P STYLE="margin-bottom: 0in">	SupportsSerialA -	1 = serial port A
suppor</P>
<P STYLE="margin-bottom: 0in">	SupportsSerialB -	1 = serial port B
support</P>
<P STYLE="margin-bottom: 0in">	TempRampRateOne - 
</P>
<P STYLE="margin-bottom: 0in">	TempRampRateTwo -</P>
<P STYLE="margin-bottom: 0in">	TotalColumns -	Total columns on sensor</P>
<P STYLE="margin-bottom: 0in">	TotalRows -		Total rows on sensor 
</P>
<P STYLE="margin-bottom: 0in">	UnderscanRows - 	Number of underscan
rows</P>
<P STYLE="margin-bottom: 0in">	VFlushBinning - 	1 = Vertical flush
binning</P>
<P STYLE="margin-bottom: 0in">	</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">For example, the following commands
would prepare the readout region 
</P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><B>	$CAMERA configure -m_RoiStartX 100</B></P>
<P STYLE="margin-bottom: 0in"><B>	$CAMERA configure -m_RoiStartY 100</B></P>
<P STYLE="margin-bottom: 0in"><B>	$CAMERA configure -m_RoiPixelsH 64</B></P>
<P STYLE="margin-bottom: 0in"><B>	$CAMERA configure -m_RoiPixelsV 64</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">would specify a 64x64 pixel region
starting at column 100, and row 100.</P>
<P STYLE="margin-bottom: 0in">	</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The camera_init.tcl
script includes code to interrogate the C++ level API and construct a
generic interface to all the available methods and instance variables
which can read/write camera parameters. The names of parameters which
 may be read can be found as members of the global array CCAPIR, and
those which  can be written can be found as members of the global
array CCAPIW.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The element of arrays can be examined
using the syntax, e.g. for CCAPIW</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>array names CCAPIW</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">3.
Code generation</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The scripting interfaces
are created using a mixture of custom code (the Ccd library), and an
automatically generated interface. The automatically generated
portion is created using SWIG (Simple Wrapper and Interface
Generator).</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Note that older versions
of SWIG may not be capable of generating functioning  wrapper code
for C++/Tcl. Please use the included version (1.3a5 or later).</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">SWIG is very easy to use.
All that is required is a .i file which defines the  methods and
instance variables for the object. In many cases this file can be
copied directly from the .h header file for the object.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Once the .i file has been
prepared, the wrapper code can be generated using a  command such as 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>/opt/apogee/bin/swig -tcl8 -c++
apogeeNET.i</B></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Note that there is a
slightly different file for each interface type. This allows us to
generate shared libraries which are named according to the interface
type.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><B>ALTA models (USB/NET)</B></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">To add a new method to
the CApnCamera object, the following steps are required</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	- create C++ code for the method in
<I>ApnCamera_Custom.cpp</I></P>
<P STYLE="margin-bottom: 0in">	- add definitions to <I>ApnCamera.h</I></P>
<P STYLE="margin-bottom: 0in">	- add the same definitions to
<I>ApnCamera.i</I></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">Once the revised Apn<I>Camera_Custom.cpp
</I>and <I>ApnCamera.h </I>and <I>ApnCamera.i</I> code has been
generated, then you are ready to build the shared library using a
command such as 
</P>
<P STYLE="margin-bottom: 0in">	</P>
<P STYLE="margin-bottom: 0in">	<B>make apogee_USB.dylib</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The Camera interface is now ready to
load into a wish shell using 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><B>	wish</B></P>
<P STYLE="margin-bottom: 0in"><B>	load /opt/apogee/lib/libccd.dylib  
     </B>
</P>
<P STYLE="margin-bottom: 0in">	<B>load ./apogee_USB.dylib </B>   
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Once your new commands
are working properly you can install the library with 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">	<B>make install</B></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">SWIG is also capable of
generating code for other scripting languages (for example, python).
Refer to the SWIG manual for details.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<OL START=4>
	<LI><P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">Tcl/tk
	and dynamic libraries</FONT></P>
	<P STYLE="margin-bottom: 0in"></P>
</OL>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The most recent versions
of Tcl/Tk have extensive support for dynamically loading libraries of
code. The Apogee ALTA  GUI makes extensive use of this capability to
tune the behavior of the interface depending upon the facilities
available.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Dynamically loadable
libraries are provided for the following 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	- Apogee USB port interface cameras</P>
<P STYLE="margin-bottom: 0in">	- Apogee Ethernet interface cameras</P>
<P STYLE="margin-bottom: 0in">	- Ccd frame in-memory
buffering/processing</P>
<P STYLE="margin-bottom: 0in">	- FitsTcl FITS file access</P>
<P STYLE="margin-bottom: 0in">	- LX200 serial interface</P>
<P STYLE="margin-bottom: 0in">	- Compressed GSC catalog access</P>
<P STYLE="margin-bottom: 0in">	- Digital sky survey access</P>
<P STYLE="margin-bottom: 0in">	- BLT graphics library</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">In all cases libraries are loaded into
a running wish by typing a command</P>
<P STYLE="margin-bottom: 0in">(or including the command in a source'd
script) such as 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>load
[path-to-library]lib[name].dylib</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">To create a new loadable
library, the following files will normally be  required (assuming a
package name of &quot;newpack&quot;)</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	newpackPackage.c   - stub code to
define the namespace, test, and call 					initialization code</P>
<P STYLE="margin-bottom: 0in">	newpackVersion.c   - stub code to
specify version info</P>
<P STYLE="margin-bottom: 0in">	newpack.c	         - the
implementation</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The implementation will
typically consist of a routine named &quot;newpackAppInit&quot; which
 defines the available commands, plus code for the commands
themselves.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The interface from Tcl to
C is easy to use. The code in /opt/apogee/src/ccd can  serve as a
template for the most common functionality.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">5.
CCD library</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The Ccd library can be interactively
loaded into a wish shell using the  command</P>
<P STYLE="margin-bottom: 0in">		</P>
<P STYLE="margin-bottom: 0in">	<B>load /opt/apogee/lib/libccd.dylib</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The Ccd loadable library
is a Tcl extension which provides simple commands for  manipulating
the raw data generated by the readout of a CCD camera.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The following commands are available</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	read_image 	- load a FITS file into an
in-memory buffer</P>
<P STYLE="margin-bottom: 0in">	write_image 	- write raw image data to
a FITS file</P>
<P STYLE="margin-bottom: 0in">	write_cimage 	- write bias subtracted
image data to a FITS file</P>
<P STYLE="margin-bottom: 0in">	write_dimage	 - calculate &quot;dark&quot;
frame and write to FITS file</P>
<P STYLE="margin-bottom: 0in">	write_zimage 	- calculate &quot;zero&quot;
frame and write to FITS file</P>
<P STYLE="margin-bottom: 0in">	write_fimage 	- calculate &quot;flat&quot;
image and write to FITS file</P>
<P STYLE="margin-bottom: 0in">	write_simage 	- calculate &quot;sky-flat&quot;
image and write to FITS file</P>
<P STYLE="margin-bottom: 0in">	shmem_image - copy image data to a
shared memory segment</P>
<P STYLE="margin-bottom: 0in">	show_image 	- transfer image data to
DS9 via shared memory</P>
<P STYLE="margin-bottom: 0in">	store_calib	 - calibrate the current
in-memory frame</P>
<P STYLE="margin-bottom: 0in">	write_calibrated - calibrate and save
to disk</P>
<P STYLE="margin-bottom: 0in">	list_buffers 	- print a list of
in-memory buffered images</P>
<P STYLE="margin-bottom: 0in">	set_biascols 	- specify the bias
columns</P>
<P STYLE="margin-bottom: 0in">	set_biasrows 	- specify the bias rows</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The Ccd library commands interact with
Apogee drivers in the following manner</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	- a driver library &quot;BufferImage&quot;
call will store an image in a named memory 	   buffer</P>
<P STYLE="margin-bottom: 0in">	- Ccd library calls then reference the
image by that name</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">For example</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	<B>$CAMERA Expose 10 1</B></P>
<P STYLE="margin-bottom: 0in"><B>	exec sleep 10</B></P>
<P STYLE="margin-bottom: 0in"><B>	$CAMERA BufferImage testimage</B></P>
<P STYLE="margin-bottom: 0in"><B>	write_image testimage myfile.fits</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">would take a 10 second
exposure (with the shutter open), wait for 10 seconds, read-out the
image, and store it in a buffer named &quot;testimage&quot;, and
finally write the raw image data to a disk FITS file named
&quot;myfile.fits&quot; The syntax required for each call can be
determined interactively by simply calling the function without any
arguments. The required syntax will then  be printed out.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Future versions of this
library will include image arithmetic and conversion functions.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">6.
LX library</FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The LX library can be interactively
loaded into a wish shell using the  command</P>
<P STYLE="margin-bottom: 0in">		</P>
<P STYLE="margin-bottom: 0in">	<B>load /opt/apogee/lib/liblx200.dylib</B></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The LX200 loadable
library is a Tcl extension which provides simple commands for 
interacting with a telescope which support the protocol used by LX200
series telescopes.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The following commands are available</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">	open_scope 		- open a link (serial) to
the telescope</P>
<P STYLE="margin-bottom: 0in">	close_scope 		- close the link to the
telescope</P>
<P STYLE="margin-bottom: 0in">	lx200_mode 		- query the telescope
mode</P>
<P STYLE="margin-bottom: 0in">	lx200_clockfmt 	- query the clock
format in effect</P>
<P STYLE="margin-bottom: 0in">	lx200_goto 		- slew to target</P>
<P STYLE="margin-bottom: 0in">	lx200_object 		- define target from
catalog</P>
<P STYLE="margin-bottom: 0in">	lx200_ext 		- define target from
extended catalog</P>
<P STYLE="margin-bottom: 0in">	write_scope 		- send low level command
to scope</P>
<P STYLE="margin-bottom: 0in">	lx200_set_date 	- set the date</P>
<P STYLE="margin-bottom: 0in">	lx200_set_filter 	- set filter</P>
<P STYLE="margin-bottom: 0in">	lx200_set_site 	- set site details</P>
<P STYLE="margin-bottom: 0in">	lx200_set 		- generic parameter set</P>
<P STYLE="margin-bottom: 0in">	lx200_pos 		- set position (ra,dec)</P>
<P STYLE="margin-bottom: 0in">	read_scope 		- low level read from
scope</P>
<P STYLE="margin-bottom: 0in">	lx200_obj_sync 	- sync on current
position</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The syntax required for
each call can be determined interactively by simply calling the
function without any arguments. The required syntax will then  be
printed out.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Future versions of this
library will include support for automated observation scripting with
multiple objects, filters, etc.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=4 STYLE="font-size: 16pt">7.
Remote use</FONT></P>
<P STYLE="margin-bottom: 0in">  
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">The software bundle
includes a simple solution for remote control of camera and telescope
functions. Every function in each loadable libary can  also be
enabled for remote access by using the provided
<I>/opt/apogee/scripts/startserver</I> script.</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">In this case the local
interface will not display any of the elements of the  graphical
interface, but will open a socket (port 2001) and accept future
commands via that channel. 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">A very simple sample
client is provided in <I>/opt/apogee/scripts/apogeeclient</I>. This
client</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">only supports a limited
set of commands. In order to add new functionality you can add the
required functions to <I>/opt/apogee/scripts/apogeeserver.tcl</I> in
the “doService”</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">routine. 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">This remote control
capability can be used from any platform which supports tcl8.0 or 
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">later
(windows,mac,unix,solaris etc.).  
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">	</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Quick start client setup</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<UL>
	<UL>
		<LI><P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">load tcl8.0 or
		later in client computer</P>
		<LI><P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">make sure
		<I>/usr/bin/tclsh</I> exists</P>
		<LI><P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">copy
		<I>/opt/apogee/scripts/apogeeclient</I> to client computer</P>
		<LI><P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">edit apogeeclient
		to replace “localhost” with server machine name</P>
		<LI><P ALIGN=JUSTIFY STYLE="margin-bottom: 0in">run apogeeclient to
		see list of supported commands.</P>
	</UL>
</UL>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
</BODY>
</HTML>